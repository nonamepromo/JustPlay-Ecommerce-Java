<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org"
	layout:decorate="~{layout/layout}">

<body>

	<!-- main -->
	<div layout:fragment="content">
		<section class="hero hero-game"
			th:style="'background:url('+ ${videogioco.imageUrl} +'); background-size: 1262px;'">
			<input type="hidden" th:value="${idVideogioco}" th:name="idVideogioco" class="form-control">

			<div class="overlay"></div>
			<div class="container">
				<div class="hero-block">
					<div class="hero-left">
						<h2 th:text="${videogioco.titolo}" class="hero-title"></h2>
					</div>
				</div>
			</div>
		</section>

		<section class="post">
			<div class="container">
				<div class="alert alert-success" role="alert" th:text="#{common.operazioneok}" th:if="${success}"></div>
				<!-- Button trigger modal -->
				<div class="row">
					<div class="col-2">
						<button type="button" class="btn btn-dark btn-shadow btn-rounded" data-toggle="modal"
							data-target="#modal-login">[[#{videogioco.vendita}]]<i
								class="fa fa-shopping-cart"></i></button>
					</div>
					<div>
						<form th:action="@{/videogiochi/addGameToWishlist}">
							<input type="hidden" th:value="${idVideogioco}" th:name="idVideogioco" class="form-control">
							<button class="btn btn-dark btn-shadow btn-rounded" type="submit" name="action"
								th:attrappend="value=${wishList != null} ? (${wishList.contains(videogioco)} ? 'delete': 'save') : 'save'"
								th:style=" ${wishList != null} ? (${wishList.contains(videogioco)} ? 'color: CornflowerBlue' : 'color: light-grey') : 'color: light-grey'">
								[[#{videogioco.addTo}]] Wishlist<i class="fa fa-heart"></i></button>
						</form>
					</div>
					<div class="col-2">
						<form th:action="@{/videogiochi/addGameToPlayedlist}">
							<input type="hidden" th:value="${idVideogioco}" th:name="idVideogioco" class="form-control">
							<button class="btn btn-dark btn-shadow btn-rounded" type="submit" name="action"
								th:attrappend="value=${playedList != null} ? (${playedList.contains(videogioco)} ? 'delete': 'save') : 'save'"
								th:style=" ${playedList != null} ? (${playedList.contains(videogioco)} ? 'color: CornflowerBlue' : 'color: light-grey') : 'color: light-grey'">
								[[#{videogioco.addTo}]] Playedlist<i class="fa fa-gamepad"></i></button>
						</form>
					</div>
					<div class="col-4">
						<form th:action="@{/videogiochi/addGameToLikedlist}">
							<input type="hidden" th:value="${idVideogioco}" th:name="idVideogioco" class="form-control">
							<button class="btn btn-dark btn-shadow btn-rounded" th:value="true" th:name="piaciuto"
								th:style="${piaciuto} ? 'color: CornflowerBlue' : 'color: light-grey'" type="submit"><i
									class="fa fa-thumbs-up"></i>
								<span th:if="${countPiaciuti>0}" th:text=" ${countPiaciuti}"></span></button>
							<button class="btn btn-dark btn-shadow btn-rounded" th:value="false" th:name="piaciuto"
								th:style="${piaciuto != null} ? (!(${piaciuto}) ? 'color: CornflowerBlue' : 'color: light-grey') : 'color: light-grey'"
								type="submit"><i class="fa fa-thumbs-down"></i>
								<span th:if="${countNonPiaciuti>0}" th:text=" ${countNonPiaciuti}"></button>

						</form>
					</div>


				</div>

				<div class="modal fade" id="modal-login">
					<div class="modal-dialog modal-sm" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title"><i class="fa fa-shopping-cart"></i>
									[[#{videogioco.venditaPrivata}]]</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body p-a-20">
								<form th:action="@{/videogiochi/addGameToSellinglistProva}"
									th:object="${videogioco_in_vendita}" method="post">
									<div class="input-group mb-3">
										<input type="hidden" th:value="${idVideogioco}" th:name="idVideogioco"
											class="form-control">
										<input type="hidden" th:value="${idUtente}" th:name="idUtente"
											class="form-control">
									</div>

									<h4 th:text="${videogioco.titolo}"></h4>
									<div class="divider"></div>
									<div class="form-group input-icon-left m-b-10">
										<i class="fa fa-dollar"></i>
										<input type="number" class="form-control form-control-secondary"
											th:field="*{prezzo}" th:placeholder="#{videogioco.venditaPrezzo}" required>
									</div>
									<div class="form-group input-icon-left m-b-10">
										<i class="fa fa-plane"></i>
										<input type="number" class="form-control form-control-secondary"
											th:field="*{prezzoSpedizione}"
											th:placeholder="#{videogioco.venditaSpedizione}">
									</div>
									<div class="form-group input-icon-left m-b-15">
										<i class="fa fa-map-signs"></i>
										<input type="text" class="form-control form-control-secondary"
											th:field="*{provincia}" th:placeholder="#{videogioco.venditaLuogo}"
											required>
									</div>
									<div class="dropdown float-left">
										<select class="form-control" name="piattaforma" required>
											<div class="dropdown-menu dropdown-menu-right">
												<option value="" selected disabled hidden>
													[[#{videogioco.venditaPiattaforma}]]
												</option>
												<option value="PS4" th:if="${videogioco.ps4Url != null}" th:value="PS4"
													class="dropdown-item">PS4</option>
												<option value="Xbox" th:if="${videogioco.xboxUrl != null}"
													th:value="Xbox" class="dropdown-item">Xbox</option>
												<option value="Pc" th:if="${videogioco.pcUrl != null}" th:value="Pc"
													class="dropdown-item">Pc</option>
											</div>
										</select>
										<div class="divider"></div>
									</div>
									<button type="submit" th:text="#{common.submit}"
										class="btn btn-primary btn-block m-t-10"> <i class="fa fa-sign-in"></i></button>
								</form>
							</div>
						</div>
					</div>
				</div>
				<div th:each="videogioco_utente_in_vendita : ${videogiochi_utente_in_vendita}">
					<div class="modal fade" th:id="'modal-videogioco-in-vendita-' + ${videogioco_utente_in_vendita.id}">
						<div class="modal-dialog modal-sm" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title"><i class="fa fa-shopping-cart"></i>
										[[#{videogioco.venditaPrivata}]]</h5>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body p-a-20">
									<form th:action="@{/videogiochi/editSellingGame}" method="post"
									th:object="${videogioco_utente_in_vendita_modificato}">

										<h4 th:text="${videogioco.titolo}"></h4>
										<div class="divider"></div>
										<input type="hidden" th:value="${videogioco_utente_in_vendita.id}" th:name="id" th:id="id"
											class="form-control">
											<input type="hidden" th:value="${videogioco_utente_in_vendita.fkVideogioco}" th:name="fkVideogioco" th:id="fkVideogioco"
												class="form-control">
										<div class="form-group input-icon-left m-b-10">
											<i class="fa fa-dollar"></i>
											<input type="number" class="form-control form-control-secondary"
											th:value="${videogioco_utente_in_vendita.prezzo}" th:name="prezzo" th:id="prezzo"
												th:placeholder="#{videogioco.venditaPrezzo}" required>
										</div>
										<div class="form-group input-icon-left m-b-10">
											<i class="fa fa-plane"></i>
											<input type="number" class="form-control form-control-secondary"
												th:value="${videogioco_utente_in_vendita.prezzoSpedizione}" th:name="prezzoSpedizione" th:id="prezzoSpedizione"
												th:placeholder="#{videogioco.venditaSpedizione}">
										</div>
										<div class="form-group input-icon-left m-b-15">
											<i class="fa fa-map-signs"></i>
											<input type="text" class="form-control form-control-secondary"
											th:value="${videogioco_utente_in_vendita.provincia}" th:name="provincia" th:id="provincia"
												th:placeholder="#{videogioco.venditaLuogo}" required>
										</div>
										<div class="dropdown float-left">
											<select class="form-control" name="piattaforma" required>
												<div class="dropdown-menu dropdown-menu-right">
													<option value="PS4" th:if="${videogioco.ps4Url != null}"
														th:selected="${videogioco_utente_in_vendita.piattaforma.equals('PS4')}"
														th:value="PS4" class="dropdown-item">PS4</option>
													<option value="Xbox" th:if="${videogioco.xboxUrl != null}"
													th:selected="${videogioco_utente_in_vendita.piattaforma.equals('Xbox')}"
														th:value="Xbox" class="dropdown-item">Xbox</option>
													<option value="Pc" th:if="${videogioco.pcUrl != null}" th:value="Pc"
													th:selected="${videogioco_utente_in_vendita.piattaforma.equals('Pc')}"
														class="dropdown-item">Pc</option>
												</div>
											</select>
											<div class="divider"></div>
										</div>
										<button type="submit" th:text="#{common.submit}"
											class="btn btn-primary btn-block m-t-10"> <i
												class="fa fa-sign-in"></i></button>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="p-t-10">
			<div class="container">
				<div class="row">
					<div class="col-lg-8">
						<!-- post -->
						<div class="mb-5" th:if="${amazon == null && gamestop == null}">
							<h4 th:text="#{videogioco.storeNo}"></h4>
						</div>
						<div th:if="${amazon != null || gamestop != null}">
							<h4 th:text="#{videogioco.storeYes}"></h4>
						</div>
						<div th:if="${amazon} != null" class="mt-4 mb-4">
							<div class="post">
								<a class="col-md-4" th:href="${amazon.amazonUrl}" target="_blank">
									<img class="mt-3"
										src="https://www.kanguru.it/wp-content/uploads/2017/09/amazon-logo.png"
										style="display: block; max-width:160px; max-height:35px; width: auto; height: auto;">
								</a>
								<a class="col-md-2 mt-3" th:href="${amazon.amazonUrl}" target="_blank">
									<h4 th:text="${amazon.prezzoAmazon} + €"></h4>
								</a>
							</div>
						</div>
						<div th:if="${gamestop} != null" class="mt-4 mb-4">
							<div class="post">
								<a class="col-md-4" th:href="${gamestop.url}" target="_blank">
									<img class="mt-3" src="https://www.gamestop.it/Views/Locale/Content/Images/logo.png"
										style="display: block; max-width:160px; max-height:35px; width: auto; height: auto;">
								</a>
								<a class="col-md-2 mt-3" th:href="${gamestop.url}" target="_blank">
									<h4 th:text="${gamestop.prezzo} + €"></h4>
								</a>
							</div>
						</div>
						<div th:if="${sellingList.contains(videogioco.id)}">
							<!-- post -->
							<div class="post">
								<h4 th:text="#{videogioco.privata}"></h4>
							</div>
							<div class="post">
								<table class="table table-hover">
									<thead>
										<tr>
											<!-- <th>Utente</th> -->
											<th th:text="#{profilo.username}"></th>
											<th th:text="#{videogioco.prezzo}"></th>
											<th th:text="#{videogioco.spedizione}"></th>
											<th th:text="#{videogioco.provincia}"></th>
											<th th:text="#{profilo.piattaformagioco}"></th>
											<!-- <th th:text="#{profilo.azioni}"></th> -->
										</tr>
									</thead>
									<tbody>
										<tr th:each=" videogioco_in_vendita : ${videogiochi_in_vendita}">
											<td th:text="${videogioco_in_vendita.username}"></td>
											<td th:text="${videogioco_in_vendita.prezzo}+ '€'"></td>
											<td th:text="${videogioco_in_vendita.prezzoSpedizione}+ '€'"></td>
											<td th:text="${videogioco_in_vendita.provincia}"></td>
											<td th:text="${videogioco_in_vendita.piattaforma}"></td>
											<td th:if="${videogioco_in_vendita.fkUtente == idUtente}">
												<button class="btn btn-link p-a-5" data-toggle="modal"
													th:data-target="${'#modal-videogioco-in-vendita-'+videogioco_in_vendita.id}"><i
														class="fa fa-edit"></i></button>
											</td>
											<td th:if="${videogioco_in_vendita.fkUtente == idUtente}">
												<form th:action="@{/videogiochi/removeGameFromSellinglist}">
													<input type="hidden" th:value="${idVideogioco}"
														th:name="idVideogioco" class="form-control">
													<button th:value="${videogioco_in_vendita.id}" th:name="idVenduto" type="submit" class="btn btn-link p-a-5"><i
															class="fa fa-trash-o"></i></button>
												</form>
											</td>
											<td th:if="${videogioco_in_vendita.fkUtente != idUtente}">
												<form th:action="@{/videogiochi/createConversazione}">
													<input type="hidden" th:value="${videogioco_in_vendita.fkUtente}"
														th:name="fkUtente" class="form-control">
													<button type="submit" class="btn btn-link p-a-5"><i
															class="fa fa-wechat"></i></button>
												</form>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
					<div class="col-lg-4">
						<!-- sidebar -->
						<div class="sidebar">
							<!-- widget game -->
							<div class="widget widget-game">
								<div class="widget-block"
									style="background-image: url('https://wallpapercave.com/wp/wp1978954.jpg')">
									<div class="overlay"></div>
									<div class="widget-item">
										<h4 th:text="${videogioco.titolo}"></h4>
										<span th:text="${videogioco.annoDiUscita}" class="meta"></span>
										<h5 th:text="#{profilo.piattaformagioco}"></h5>
										<a th:if="${videogioco.ps4Url != null}" href="#"><span
												class="badge badge-ps4">Ps4</span></a>
										<a th:if="${videogioco.xboxUrl != null}" href="#"><span
												class="badge badge-xbox-one">Xbox
												One</span></a>
										<a th:if="${videogioco.pcUrl != null}" href="#"><span
												class="badge badge-steam">Pc</span></a>
										<h5></h5>
										<ul>
											<li><a></a></li>
											<li><a></a></li>
										</ul>
										<h5>Descrizione</h5>
										<p th:text="${videogioco.descrizione}"></p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
	<!-- /main -->

	<!-- plugins js -->
	<script src="plugins/lightbox/lightbox.js" th:src="@{/plugins/lightbox/lightbox.js}"></script>
	<script src="plugins/sticky/jquery.sticky.js" th:src="@{/plugins/sticky/jquery.sticky.js}"></script>
	<script src="plugins/easypiechart/jquery.easing.1.3.js"
		th:src="@{/plugins/easypiechart/jquery.easing.1.3.js}"></script>
	<script src="plugins/easypiechart/jquery.easypiechart.min.js"
		th:src="@{/plugins/easypiechart/jquery.easypiechart.min.js}"></script>
	<script th:inline="javascript">
		(function ($) {
			"use strict";
			// easyPieChart
			$('.chart').easyPieChart({
				barColor: '#5eb404',
				trackColor: '#e3e3e3',
				easing: 'easeOutBounce',
				onStep: function (from, to, percent) {
					$(this.el).find('span').text(Math.round(percent));
				}
			});

			// lightbox
			$('[data-lightbox]').lightbox({
				disqus: 'gameforestyakuzieu'
			});
		})(jQuery);
	</script>
</body>

</html>